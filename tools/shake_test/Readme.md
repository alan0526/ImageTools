# 防抖检测工具
## 使用方法
1. 拍摄视频，视频的要求：尽量用棋盘格等边缘比较明显的物体，图像中心尽量有明显的特征点
2. 导入振动台上拍摄的视频，可以通过打开文件或者拖动文件到视频预览窗口进行导入
3. 点击右下角的开始，会开始对图像进行处理。点击停止，会停止图像的处理
4. 处理完成过后，会输出抖动的结果

## 高级操作
1. 由于有些视频存在OSD，会干扰到特征点的选取，可以调整上下边界控制特征点的选取范围
2. 跳过的帧数：可以跳过前几帧，再进行特征点选取。因为有的时候前几帧有干扰的物体，或者效果不佳
3. 特征点的数量，如果画面中心没有特征点，那么可以调整此滑块。如果特征点过多，也可以调整此滑块
4. 特征点的运动幅度，如果运动幅度过大，出现跟踪错误的话，就增大特征点的运动幅度
5. 如果需要测试图像的变形程度，需要排除静止的点，需要先勾选排除静止的点的选项

## 显示情况
1. 


## 评价标准
我觉得应该有两个，一个是图片中心的位移，一个是图像的形变程度
如果图像不变形，每个特征点相对于图片中心都是固定的，
每个特征点的位移应该是和图片中心一致的
计算方法：第一帧算出每个特征点相对于图片中心的距离，后续每帧的特征点
都与第一帧的距离做一个差，所有差的平方和就作为图片的形变程度

每个点的运动角度

形变程度和每个点的运动方向和运动速度有关，而两帧之间的距离太小，计算容易出现误差，直接拿最左边和最右边的值做一个差。
每个点的运动可以看做一个向量，每个点的运动向量和中心点的运动向量差就是图像的变形程度

## 原理
先在第一张图像上找到比较好的特征点
后续的帧对这些特征点进行跟踪

## 遇到的问题
有些特征点跟踪的时候会产生漂移，甚至跟丢了的情况
1. 利用cornerSubPix计算出亚像素点，更加精准
2. 还可能是光流法搜索的区域不够大，需要增大winSize